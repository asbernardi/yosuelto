<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.83.1">
    <title>YoSuelto - ¡Soltá lo que no usás!</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/5.0/examples/album/">

    <!-- Bootstrap core CSS -->
    <link href="/bootstrap.min.css" rel="stylesheet">

    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
    </style>

</head>
<body>

<header th:replace="header :: header"></header>

<main>

    <section class="py-5 text-center container">
        <div class="row py-lg-5">
            <div class="col-lg-6 col-md-8 mx-auto">
                <h1 class="fw-light">Yo Suelto</h1>
                <p class="lead text-muted">Acá podés soltar (donar) todas las cosas que ya no usás más. También podés postularte para recibir cosas que otras personas soltaron. Todo lo que hay en este sitio es gratis.</p>
                <p>
                    <a href="/donacion/donar" class="btn btn-primary my-2">¡Donar ahora!</a>
                    <a href="#" class="btn btn-secondary my-2">Secondary action</a>
                </p>
            </div>
        </div>
    </section>

    <div class="album bg-light">
        <div class="container">

            <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
                <div class="col" th:each="publication : ${publications}">
                    <div class="card shadow-sm">
                        <a th:href="@{'/donacion/'+${publication.url}}">
                            <img src="http://localhost:8080/donacion/imagen/1.jpg" th:src="${publication.imageUrl}" width="100%" height="225"/>
                        </a>
                        <div class="card-body">
                            <p class="card-text" th:text="${publication.description}">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
                            <div class="d-flex justify-content-between align-items-center">
                                <div class="btn-group">
                                    <button type="button" class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#postulationModal" th:attr="data-bs-donation-id=${publication.id}">¡Postularme!</button>
                                    <button type="button" class="btn btn-sm btn-outline-secondary">Edit</button>
                                </div>
                                <small class="text-muted" th:text="${publication.publicationDateSince}">hace 9 minutos</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="postulationModal" tabindex="-1" aria-labelledby="postulationModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="postulationModalLabel">Postulación</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <form class="needs-validation" novalidate action="#" th:action="@{/donacion/postular}" th:object="${postulation}" method="post">
                    <div class="modal-body">
                        <p>¡Postulate como candidato para recibir esta donación!</p>
                        <input type="hidden" id="publicationId" placeholder="" value="" th:field="*{publicationId}">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" class="form-control" id="email" placeholder="you@example.com" required th:field="*{email}">
                        <div class="invalid-feedback">
                            Por favor dejanos una dirección de correo electrónico, para poder avisarte si te regalaron esta donación.
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary">Postularme</button>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

</main>

<footer class="text-muted py-5">
    <div class="container">
        <p class="float-end mb-1">
            <a href="#">Volver al inicio</a>
        </p>
        <p class="mb-1">&copy; YoSuelto 2021.</p>
        <p class="mb-0">Podés donar todo lo que ya no usás y además elegir a quién. Podés leer nuestros <a href="/">Términos y Condiciones</a>.</p>
    </div>
</footer>

<script src="/bootstrap.bundle.min.js"></script>

<script src="/form-validation.js"></script>

<script>
    var postulationModal = document.getElementById('postulationModal')
    postulationModal.addEventListener('show.bs.modal', function (event) {
      // Button that triggered the modal
      var button = event.relatedTarget
      // Extract info from data-bs-* attributes
      var donationId = button.getAttribute('data-bs-donation-id')

      document.getElementById('publicationId').value = donationId
    })
</script>

</body>
</html>